{"ast":null,"code":"import CryptoJS from 'crypto-js';\nimport { secretKey } from '@/config/token.js';\nimport { message } from 'antd';\n/**\n * 加密信息,本地存储\n * @param {String} key 本地存储key\n * @param {Object} info 用户信息\n */\n\nexport async function setLoginInfo(key, info) {\n  if (key.length && JSON.stringify(info) !== '{}') {\n    // 1.要存储的值  2.加密的秘钥（解密的时候必须要根据秘钥才能解密）\n    let cipherText = CryptoJS.AES.encrypt(JSON.stringify(info), secretKey).toString(); //对加密数据进行base64处理, 原理：就是先将字符串转换为utf8字符数组，再转换为base64数据\n\n    let encData = CryptoJS.enc.Base64.stringify(CryptoJS.enc.Utf8.parse(cipherText));\n    localStorage.setItem(key, encData); //本地存储\n\n    return true;\n  } else {\n    message.error('网络异常, 请稍后重试');\n    return false;\n  }\n}\n/**\n * 取出加密后的信息\n * @param {String} key 本地存储key\n */\n\nexport function getLoginInfo(key) {\n  if (key.length) {\n    /* 取出加密后的value */\n    let tk = localStorage.getItem(key); //把存储的值取出\n    //将数据先base64还原，再转为utf8数据\n\n    let decData = CryptoJS.enc.Base64.parse(tk).toString(CryptoJS.enc.Utf8); //解密数据\n\n    let bytes = CryptoJS.AES.decrypt(decData, secretKey);\n    let originalText = bytes.toString(CryptoJS.enc.Utf8); //解密操作\n\n    return JSON.parse(originalText);\n  }\n}\n/**\n * 清除登录状态\n */\n\nexport function clearLoginState() {\n  localStorage.clear();\n  window.location.reload();\n}","map":{"version":3,"sources":["/Users/jr/myWeb/React项目实战/music163_jr/src/utils/secret-key.js"],"names":["CryptoJS","secretKey","message","setLoginInfo","key","info","length","JSON","stringify","cipherText","AES","encrypt","toString","encData","enc","Base64","Utf8","parse","localStorage","setItem","error","getLoginInfo","tk","getItem","decData","bytes","decrypt","originalText","clearLoginState","clear","window","location","reload"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,WAArB;AACA,SAASC,SAAT,QAA0B,mBAA1B;AACA,SAASC,OAAT,QAAwB,MAAxB;AAEA;AACA;AACA;AACA;AACA;;AACA,OAAO,eAAeC,YAAf,CAA4BC,GAA5B,EAAiCC,IAAjC,EAAuC;AAC5C,MAAID,GAAG,CAACE,MAAJ,IAAcC,IAAI,CAACC,SAAL,CAAeH,IAAf,MAAyB,IAA3C,EAAiD;AAC/C;AACA,QAAII,UAAU,GAAGT,QAAQ,CAACU,GAAT,CAAaC,OAAb,CACfJ,IAAI,CAACC,SAAL,CAAeH,IAAf,CADe,EAEfJ,SAFe,EAGfW,QAHe,EAAjB,CAF+C,CAM/C;;AACA,QAAIC,OAAO,GAAGb,QAAQ,CAACc,GAAT,CAAaC,MAAb,CAAoBP,SAApB,CAA8BR,QAAQ,CAACc,GAAT,CAAaE,IAAb,CAAkBC,KAAlB,CAAwBR,UAAxB,CAA9B,CAAd;AACAS,IAAAA,YAAY,CAACC,OAAb,CAAqBf,GAArB,EAA0BS,OAA1B,EAR+C,CAQX;;AACpC,WAAO,IAAP;AACD,GAVD,MAUO;AACLX,IAAAA,OAAO,CAACkB,KAAR,CAAc,aAAd;AACA,WAAO,KAAP;AACD;AACF;AAED;AACA;AACA;AACA;;AACA,OAAO,SAASC,YAAT,CAAsBjB,GAAtB,EAA2B;AAChC,MAAIA,GAAG,CAACE,MAAR,EAAgB;AACd;AACA,QAAIgB,EAAE,GAAGJ,YAAY,CAACK,OAAb,CAAqBnB,GAArB,CAAT,CAFc,CAEsB;AACpC;;AACA,QAAIoB,OAAO,GAAGxB,QAAQ,CAACc,GAAT,CAAaC,MAAb,CAAoBE,KAApB,CAA0BK,EAA1B,EAA8BV,QAA9B,CAAuCZ,QAAQ,CAACc,GAAT,CAAaE,IAApD,CAAd,CAJc,CAKd;;AACA,QAAIS,KAAK,GAAGzB,QAAQ,CAACU,GAAT,CAAagB,OAAb,CAAqBF,OAArB,EAA8BvB,SAA9B,CAAZ;AACA,QAAI0B,YAAY,GAAGF,KAAK,CAACb,QAAN,CAAeZ,QAAQ,CAACc,GAAT,CAAaE,IAA5B,CAAnB,CAPc,CAOwC;;AACtD,WAAOT,IAAI,CAACU,KAAL,CAAWU,YAAX,CAAP;AACD;AACF;AAED;AACA;AACA;;AACA,OAAO,SAASC,eAAT,GAA2B;AAChCV,EAAAA,YAAY,CAACW,KAAb;AACAC,EAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AACD","sourcesContent":["import CryptoJS from 'crypto-js';\nimport { secretKey } from '@/config/token.js';\nimport { message } from 'antd';\n\n/**\n * 加密信息,本地存储\n * @param {String} key 本地存储key\n * @param {Object} info 用户信息\n */\nexport async function setLoginInfo(key, info) {\n  if (key.length && JSON.stringify(info) !== '{}') {\n    // 1.要存储的值  2.加密的秘钥（解密的时候必须要根据秘钥才能解密）\n    let cipherText = CryptoJS.AES.encrypt(\n      JSON.stringify(info),\n      secretKey\n    ).toString();\n    //对加密数据进行base64处理, 原理：就是先将字符串转换为utf8字符数组，再转换为base64数据\n    let encData = CryptoJS.enc.Base64.stringify(CryptoJS.enc.Utf8.parse(cipherText));\n    localStorage.setItem(key, encData); //本地存储\n    return true;\n  } else {\n    message.error('网络异常, 请稍后重试');\n    return false;\n  }\n}\n\n/**\n * 取出加密后的信息\n * @param {String} key 本地存储key\n */\nexport function getLoginInfo(key) {\n  if (key.length) {\n    /* 取出加密后的value */\n    let tk = localStorage.getItem(key); //把存储的值取出\n    //将数据先base64还原，再转为utf8数据\n    let decData = CryptoJS.enc.Base64.parse(tk).toString(CryptoJS.enc.Utf8);\n    //解密数据\n    let bytes = CryptoJS.AES.decrypt(decData, secretKey);\n    let originalText = bytes.toString(CryptoJS.enc.Utf8); //解密操作\n    return JSON.parse(originalText);\n  }\n}\n\n/**\n * 清除登录状态\n */\nexport function clearLoginState() {\n  localStorage.clear()\n  window.location.reload()\n}\n"]},"metadata":{},"sourceType":"module"}